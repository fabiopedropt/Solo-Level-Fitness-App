import React from 'react';
import { StyleSheet, Text, View, TouchableOpacity, ScrollView, Alert, Switch } from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import * as Icon from '@expo/vector-icons';
import { useSubscription } from '../utils/SubscriptionContext';
import { useTheme } from '../utils/ThemeContext';
import AdBanner from '../components/AdBanner';

export default function SettingsScreen() {
  const { isPremium, purchaseMonthly, purchaseYearly, cancelSubscription } = useSubscription();
  const { isDark, toggleTheme } = useTheme();

  // Rest of the component remains the same

  return (
    <SafeAreaView style={styles.screen}>
      <ScrollView style={styles.scrollContent}>
        {!isPremium && <AdBanner size="large" />}

        {/* Add this section for theme toggle */}
        <View style={styles.card}>
          <View style={styles.cardTitleContainer}>
            <Icon.Ionicons name="color-palette-outline" size={20} color="#333333" style={styles.cardTitleIcon} />
            <Text style={styles.cardTitle}>Appearance</Text>
          </View>
          
          <View style={styles.settingRow}>
            <Text style={styles.settingLabel}>Dark Mode</Text>
            <Switch
              value={isDark}
              onValueChange={toggleTheme}
              trackColor={{ false: '#767577', true: '#4a4ae0' }}
              thumbColor="#f4f3f4"
            />
          </View>
        </View>

        {/* Rest of the component remains the same */}
        {/* ... */}
      </ScrollView>
    </SafeAreaView>
  );
}